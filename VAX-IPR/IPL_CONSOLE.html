<html>
<head>
<title>Internal Processor Registers</title>
</head>

<body>

<IMG ALIGN=left SRC="pics/MacVAX-Icon.GIF">	

<center><h1>VAX Internal Processor Registers<br>
Console Registers</h1></center><br>

<p>These registers are accessed using the <b>mtpr</b> and <b>mfpr</b> instructions.<p>

<hr><!-- -------------------------------------------------------------- -->
<dl compact>

<A NAME="IPL_20"></A>
	<dt><B>RXCS 	
	<dd>0x20</B> Receive Control Register			(Read / Write)<p>
	<IMG ALIGN=bottom SRC="pics/IPR-RXCS.GIF">	
	<ul>                                                           
		<B>D</B>	= Done bit		(Read Only)<br>
		<B>IE</B>	= Interrupt enable		(Read/Write)<br>
	</ul>
	
	<p>The done bit in the <B>RXCS</B> register is read-only and is 
	set by the 	keyboard handler 
	whenever a key press is received.  It is initialized to <B>0</B> 
	at bootstrap 	time and is cleared 
	whenever <listing><B>mfpr</B> #<B>RXDB</B>, dst</listing> is executed.  
	 If  the 	<B>RXCS</B> interrupt enable  bit is set by 
	software, an interrupt is generated when done becomes set.  Similarly, 
	if done is 	already 
	set and the software sets interrupt enable , an interrupt is generated.<p>
	
<A NAME="IPL_21"></A>
	<dt><B>RXDB	
	<dd>0x21</B> Receive Data Register			(Read Only)<p>
	<IMG ALIGN=bottom SRC="pics/IPR-RXDB.GIF">	
	<ul>                                                             
		<B>E</B> = Error bit		(Read Only)<p>
	</ul>

	The data received from the keyboard is stored in the low eight bits. 
	 The error 	bit in the 
	<B>RXDB</B> register is set when the received data contained an error 
	such as 	overrun or loss 
	of connection.  This register is read only.<p>
	
<A NAME="IPL_22"></A>
	<dt><B>TXCS		
	<dd>0x22</B> Transmit Control Register		(Read / Write)<p>
	<IMG ALIGN=bottom SRC="pics/IPR-TXCS.GIF">	
	<ul>                                                            
		<B>R</B>	= Ready bit		Read Only<br> 
		<B>IE</B>	= Interrupt enable bit	Read Write
	</ul>
	<p>At Bootstrap time (when MacVax is reset) the ready  bit is set to <B>1</B>. 
	On a 
	<listing><B>mtpr</B> src, #<B>TXDB</B></listing> instruction, the ready 
	 bit is 	cleared.  When the output of the 
	character completes the ready  bit is set back to <B>1</B>. If the 
	interrupt 	enable bit is set by 
	software, an interrupt is generated when the ready  bit is set. 
	 If the ready  	bit is already 
	set and software sets interrupt enable, an interrupt is also generated. <p>
	
<A NAME="IPL_23"></A>
	<dt><B>TXDB	
	<dd>0x23</B> Transmit Data Register			(Write Only)<p>
	<IMG ALIGN=bottom SRC="pics/IPR-TXDB.GIF">	
                                                             
	<p>Writing into the <B>TXDB</B> register will cause the character 
	represented by the 	low byte to be 
	drawn in the I/O window.  Writing to the <B>TXDB</B> register 
	when the ready  bit 	is clear  
	may cause the character currently being output to be lost.   
	
	Note that the MacVAX simulator sends characters asynchronously to the screen.
	This means that your characters may not appear instantly in the 
	input/output window upon execution of a 
	<listing><B>mtpr</B> src, #<B>TXDB</B></listing> Several
	 instructions will be 	executed before the output is completed.

</dl>

</body>
</html>

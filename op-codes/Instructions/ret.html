<!doctype html public "-//IETF//DTD HTML 2.0//EN"><HTML><HEAD><TITLE>RET Instruction</TITLE></HEAD><BODY><H2>RET Instruction</h2><table border=0 valign=top cellpadding=5><tr>	<td valign=top><b>Purpose:</b></td><td>To transfer control from a procedure back to the calling program</td><tr>	<td><b>Format:</b></td><td>opcode</td><tr>	<td valign=top><b>Operation:</b></td><td>	{restores SP From FP};<br>	{restores registers};<br>	{drop stack alignment};<br>	{restore PSW};<br>	{If CALLS then remove arglist};	</td><tr>	<td valign=top><b>Condition<br>Codes:</b></td>		<td>N &lt- restored PSW&ltN&gt;<br>			Z &lt- restored PSW&ltZ&gt;<br>			V &lt- restored PSW&ltV&gt;<br>			C &lt- restored PSW&ltC&gt;</td><tr>	<td valign=top><B>Exceptions:</B></td><td>Reserved Operand</td><tr>	<td valign=top><b>Opcodes:<b></td>		<td>			<table border=0 valign=top cellpadding=2>			<tr> <td>04</td><td>RET</td><td>Return from Procedure</td>			</table>		</td><tr>	<td valign=top><b>Description:</b></td>		<td>SP is replaced by FP plus 4. A longword containing the stack alignment bits in bits 31:30, a CALLS/CALLG flag in bit 29, the low 12 bits of the procedure entry mask in bits 27:16, and the saved PSW in bits 15:0 is popped from the stack and saved as a temporary. PC, FP and AP are replaced by longwords popped from the stack. A register restore mask is formed from bits 27:16 of the temporary. Scanning from bit 0 to bit 11 of the restore mask, the contents of registers whose number is indicated by set bits in the mask are replaced by longwords popped from the stack. SP is replaced by the sum of SP and bits 31:30 of the temporary. PSW is replaced by bits 15:0 of the temporary. If bit 29 of the temporary is 1 (Indicating that this procedure was called with a CALLS), a longword containing the number of arguments is popped from the stack. Four times the unsigned value of the low byte of this longword is added to SP and SP is replaced by the result.		</td><tr>	<td valign=top><b>Notes:</b></td>		<td><dl compact>		<dt>1.<dd>A reserved operand fault occurs if tmpl&lt15:8&gt NEQ 0.The value of tmpl<28> is ignored.		<dt>2.<dd>On a reserved operand fault, the condition codes are unpredictable. 		<dt>3.<dd>The procedure calling standard and condition handling facility assume that procedures which return a function value or status code do so in R0 or R) and R1.		</dl></td></table></BODY></HTML>
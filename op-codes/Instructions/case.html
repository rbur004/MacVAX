<!doctype html public "-//IETF//DTD HTML 2.0//EN">
<HTML>

<HEAD>
<TITLE>CASE Instruction
</TITLE>
</HEAD>

<BODY>
<H2>CASE Instruction</h2>

<table border=0 valign=top cellpadding=5>

<tr>	<td valign=top><b>Purpose:</b></td><td>To perform multi-way branching depending on arithmetic input.</td>

<tr>	<td valign=top><b>Format:</b></td><td>opcode select.rx, base.rx, limit.rx<br>.word displ[0].bw<br>...<br>.word displ[limit].bw</td>

<tr>	<td valign=top><b>Operation:</b></td><td>
		<dl>
			<dt>tmp &lt- selector - base;<br>
			<dt>if temp &lt= limit then 
			<dd>PC &lt- PC + sign-extended displ[temp];
			<dt>else 
			<dd>PC &lt- PC + (2 + 2 * limit);
		</dl>
		</td>

<tr>	<td valign=top><b>Condition<br>Codes:</b></td>
		<td>N &lt- temp LSS limit;<br>
			Z &lt- temp EQL limit;<br>
			V &lt- 0;<br>
			C &lt- tmp LSSU limit;</td>

<tr>	<td valign=top><B>Exceptions:</B></td><td>None</td>

<tr>	<td valign=top><b>Opcodes:<b></td>
		<td>
			<table border=0 valign=top cellpadding=2>
			<tr> <td>8F</td><td>CASEB</td><td>Case Byte</td>
			<tr> <td>AF</td><td>CASEW</td><td>Case Word</td>
			<tr> <td>CF</td><td>CASEL</td><td>Case Long</td>
			</table>
		</td>

<tr>	<td valign=top><b>Description:</b></td>
		<td>The base operand is subtracted from the selector operand and a temporary is replace with the result. The temporary is compared with the limit operand and if it is less than (unsigned) or equal to , a branch displacement selected by the temporary value is added to the PC and the PC is replaced by the result. Otherwise two times the sum of the limit operand and one is added to the PC and the PC is replaced with the result. This causes the PC to be moved past the array of branch displacements. Regardless of the branch being taken, the condition codes are affected by the comparison of the temporary with the limit operand.</td>

<tr>	<td valign=top><b>Notes:</b></td>
		<td><dl compact>
		<dt>1.<dd>After operand evaluation, the PC is pointing at displ[0], not the next instruction. The branch displacments are relative to the address of displ[0].
		<dt>2.<dd>The selector and base operands can both be considered either as signed or unsigned integers.</td>
</table>

</BODY>

</HTML>

<!doctype html public "-//IETF//DTD HTML 2.0//EN"><HTML><HEAD><TITLE>ACB Instruction</TITLE></HEAD><BODY><H2>ACB Instruction</h2><table border=0 valign=top cellpadding=5><tr>	<td valign=top><b>Purpose:</b></td><td>To maintain a loop count and loop</td><tr>	<td valign=top><b>Format:</b></td><td>opcode limit.rx, add.rx, index.mx, displ.bw</td><tr>	<td valign=top><b>Operation:</b></td><td>	<dl>	<dt>index &lt- index + add;	<dt>if{{ add &gt= 0 } AND { index &lt= limit }}	<dt>OR{{ add &lt 0 } AND { index &gt= limit }} then	<dd>PC &lt- PC + sign-extended displ;	</dl>	</td><tr>	<td valign=top><b>Condition<br>Codes:</b></td>		<td>N &lt- index LSS 0;<br>			Z &lt- index EQL 0;<br>			V &lt- {Integer Overflow or Floating Overflow};<br>			C &lt- C;</td><tr>	<td valign=top><B>Exceptions:</B></td><td>Integer Overflow;<br>							Floating Overflow<br>							Floating Underflow;<br>							Reserved Operand (Floating Point)</td><tr>	<td valign=top><b>Opcodes:<b></td>		<td>			<table border=0 valign=top cellpadding=2>			<tr> <td>9D</td><td>ACBB</td><td>Add Compare and Branch Byte</td>			<tr> <td>3D</td><td>ACBW</td><td>Add Compare and Branch Word</td>			<tr> <td>F1</td><td>ACBL</td><td>Add Compare and Branch Long</td>			<tr> <td>4F</td><td>ACBF</td><td>Add Compare and Branch Float</td>			<tr> <td>6F</td><td>ACBD</td><td>Add Compare and Branch Double</td>			</table>		</td><tr>	<td valign=top><b>Description:</b></td>		<td>The addend operand is added to the index operand and the index operand is replaced by the result. The index operand is compared with the limit operand. If the addend operand is positive (or 0) and the comparison is less than or equal , or if the addend is negative and the comparison is greater than or equal, the signed-extended branch operand is added to the <b>PC<b> and the <b>PC</b> is replaced by the result.</td><tr>	<td valign=top><b>Notes:</b></td>		<td><dl compact>		<dt>1.<dd>ACB efficiently implements the general FOR or DO loops in high level languages since the sense of the comparison between the index and limit is dependant on the sign of the addend.		<dt>2.<dd>On integer overflow, the index operand is replaced by the low order bits of the true result. Comparison and branch determination proceed normally on the updated index operand.		<dt>3.<dd>On floating underflow, the index operand is replaced by 0. Comparison and branch determination proceed normally.		<dt>4.<dd>On floating overflow, the index operand is replaced by an operand of all 0 bits except for a sign bit of 1 (-0 or reserved operand). N &lt- 1; z &lt- 0; V &lt- 1. The branch is not taken.		<dt>5.<dd>On a reserved operand fault, the index operand is unaffected and the condition codes are unpredictable.		<dt>6.<dd>Except for 5 above, the C-bit is unaffected.		<dt>7.<dd>On a trap, the branch condition will be tested and the PC potentially updated before the exception is taken. Thus, the PC might point to the start of the loop and no the next consecutive instruction.		</dl></td></table></BODY></HTML>
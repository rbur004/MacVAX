<!doctype html public "-//IETF//DTD HTML 2.0//EN"><HTML><HEAD><TITLE>MOVC Instruction</TITLE></HEAD><BODY><H2>MOVC Instruction</h2><table border=0 valign=top cellpadding=5><tr>	<td valign=top><b>Purpose:</b></td><td>To copy a character string or block of memory</td><tr>	<td valign=top><b>Format:</b></td><td>opcode srclen.rw, srcadr.ab, dstadr.ab<br>opcode srclen.rw, srcadr.ab, fill.rb, dstlen.rw, dstadr.ab<br></td><tr>	<td valign=top><b>Operation:</b></td><td>		<b>MOVC3</b>		<br><b>MOVC5</b> if srclen = dstlen<br>		{copy srclen bytes from the src address to the dst address};<br>		{C &lt- 0; Z &lt- 1}<br>		<br>		<b>MOVC5</b> if srclen &gt dstlen<br>		{copy dstlen bytes from the src address to the dst address};<br>		{C &lt- 0; Z &lt- 0}<br>		<br>		<b>MOVC5</b> if srclen &gt dstlen<br>		{copy srclen bytes from the src address to the dst address};<br>		{fill (dstlen  - srclen) bytes from<br>(dst address + srclen) to (dst address + dstlen - 1)};<br>		{C &lt- 1; Z &lt- 0}<br>		<br>		</td><tr>	<td valign=top><b>Condition<br>Codes:</b></td>		<td>N &lt- srclen LSS dstlen;<br>			Z &lt- srclen EQL dstlen;<br>			V &lt- 0;<br>			C &lt- srclen LSSU dstlen;</td><tr>	<td valign=top><B>Exceptions:</B></td><td>None</td><tr>	<td valign=top><b>Opcodes:<b></td>		<td>			<table border=0 valign=top cellpadding=2>			<tr> <td>28</td><td>MOVC3</td><td>Move Character 3 Operand</td>			<tr> <td>2C</td><td>MOVC5</td><td>Move Character 5 Operand</td>			</table>		</td><tr>	<td valign=top><b>Description:</b></td>		<td>In the 3 operand format, the destination string specified by the length an destination address operands is replaced by the source string specified by the length and the source address operands.<p>In the 5 operand format, the destination string specified by the destination length and the destination address operands is replaced by the source string specified by the source length and source address operands. If the destination string is longer than the source string, the remaining bytes are replaced by the fill operand. If the destination string is shorter than the source string, only the number of bytes specified by the destination string length operand are copied.<p>The operation of the instruction is such that overlap of the source and destination strings does not affect the result.		</td><tr>	<td valign=top><b>Notes:</b></td>		<td><dl compact>		<dt>1.<dd>After execution of MOVC3;<br>				R0 = 0<br>				R1 = address of one byte beyond the source string.<br>				R2 = 0<br>				R3 = address of one byte beyond the destination string.<br>				R4 = 0<br>				R5 = 0<br>		<dt>2.<dd>After execution of MOVC5;<br>				R0 = Number of unmoved bytes remaining in  the source (if any)<br>				R1 = address of one byte beyond the last moved byte of the source string.<br>				R2 = 0<br>				R3 = address of one byte beyond the destination string.<br>				R4 = 0<br>				R5 = 0<br>		<dt>3.<dd>MOVC3 is the preferred way to copy one block of memory to another.		<dt>4.<dd>MOVC5 with a 0 source length operand is the preferred way to fill a block of memory with the fill character.		<dt>5.<dd>Both MOVC3 and MOVC5 are interruptable. If interrupted, the first part done flag in the PSL will be set and the registers R0 through R5 will hold working values that must be restored so that the instruction can be continued. The instruction will continue on <A HREF="rei.html">REI</A>.		</dl></td></table></BODY></HTML>